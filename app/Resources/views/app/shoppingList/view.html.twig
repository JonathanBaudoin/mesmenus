{% extends 'base.html.twig' %}

{% block content %}

    <p class="center">
        <a href="{{ path('app_shoppinglist_addproduct', {'id': menu.id}) }}" class="btn"><i class="fa fa-plus" aria-hidden="true"></i> {{ 'shoppingList.ingredient.add_product'|trans }}</a>
        <a href="{{ path('app_shoppinglist_edit', {'id': menu.id}) }}" class="btn"><i class="fa fa-edit" aria-hidden="true"></i> {{ 'shoppingList.ingredient.edit'|trans }}</a>
        <a href="{{ path('app_shoppinglist_generate', {'id': menu.id}) }}" class="btn"><i class="fa fa-refresh" aria-hidden="true"></i> {{ 'shoppingList.generate'|trans }}</a>
        <a href="{{ path('app_menu_view', {'id': menu.id}) }}" class="btn"><i class="fa fa-bars" aria-hidden="true"></i> {{ 'menu.view'|trans }}</a>
    </p>

    {% if menu.shoppingListIngredients is empty %}
        <p class="flash-message flash-success">{{ 'shoppingList.empty.explanation'|trans }}</p>
        <p class="flash-message flash-error">{{ 'shoppingList.empty.warning'|trans }}</p>
        <p class="center">
            <a href="{{ path('app_shoppinglist_generate', {'id': menu.id}) }}" class="btn">{{ 'shoppingList.generate'|trans }}</a>
        </p>
    {% else %}
        <ul id="shopping-list" data-menu="{{ menu.id }}">
        {% for ingredient in shoppingList %}
            {% set inCart = (ingredient.isInCart) ? 'added' : 'removed' %}
            <li class="ingredient {{ inCart }}" data-name="{{ ingredient.ingredientName }}" data-id="{{ ingredient.id }}">
                <a href="#" class="product">
                    <span>
                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                        <span class="name">{{ ingredient.ingredientName }}</span>
                    </span>
                    <span class="quantity">{{ ingredient.amount }} {{ ingredient.measureUnit }}</span>
                </a>
            </li>
        {% endfor %}
        </ul>
    {% endif %}
{% endblock %}

{% block stylesheets %}
    {% stylesheets filter="sass"
    "assets/css/shopping-list/view_shoppingList.scss"
    %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('assets/js/shoppingList/cart_products.js') }}"></script>
{% endblock javascripts %}